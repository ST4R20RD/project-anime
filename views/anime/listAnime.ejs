<link rel="stylesheet" href="/css/listAnime.css" />
<link rel="stylesheet" href="/css/index.css" />

<h1>Add Anime to list</h1>
<br>
<div class="container">
  <button onclick="pageChanger(false)"><</button>
  <button onclick="pageChanger(true)">></button>
  <ul class="listAnimes">
    <% items.forEach((item) => { %>

    <li>
      <a href="/anime/<%= item.id %>">
        <img src="https://media.kitsu.io/anime/poster_images/<%= item.id %>/small.jpg" alt="" /> <br>
        <p class="title"><%= item.attributes.canonicalTitle %></p>
        <p class=""></p>
      </a>
    </li>
    <% }) %>
  </ul>
  <button onclick="pageChanger(false)"><</button>
  <button onclick="pageChanger(true)">></button>
</div>

<script>
  function pageChanger(flag) {
    //Subtring to get the whole URL before the page number, starting from index zero
    let url = window.location.href.substring(
      0,
      window.location.href.lastIndexOf("/") + 1
    );

    //Subtring to get the page number after the last "/"
    let currentPageNum = window.location.href.substring(
      window.location.href.lastIndexOf("/") + 1
    );

    //previous and next button logic
    //if flag is true, add to the url the current page number +1 : if flag is false, add to the url the current number -1.
    flag
      ? (window.location.href = url + (parseInt(currentPageNum) + 1))
      : (window.location.href = url + (parseInt(currentPageNum) - 1));
  }
</script>


